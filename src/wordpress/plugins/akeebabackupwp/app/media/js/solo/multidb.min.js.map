{"version":3,"file":"multidb.min.js","names":["akeeba","Multidb","modalDialog","render","data","tbody","document","getElementById","rootname","innerHTML","hasOwnProperty","def","addRow","addNewRecordButton","root","append_to_here","elTr","createElement","className","System","set","JSON","stringify","elTdDelete","style","width","elDeleteSpan","addEventListener","elRootNode","parentNode","new_data","get","verb","Fsfilters","toggle","response","caller","success","elRemove","removeChild","elDeleteIcon","insertAdjacentHTML","appendChild","elTdEdit","elEditSpan","cache_element","cache_data","parse","cache_root","editor","driver","value","host","username","password","database","prefix","e","elEditorDefaultOld","elEditorDefault","cloneNode","replaceChild","elAlertDiv","id","elSpanNotifierContent","elSpinner","setAttribute","getOptions","elLoadingText","textContent","Text","_","elEditorTable","outerHTML","elDriverDropdown","elSelectedOption","options","selectedIndex","req","port","user","query","akaction","doAjax","elEditorNotifierContent","status","message","close","params","errorCallback","elEditorSaveOld","elEditorSave","dumpFile","substr","querySelectorAll","querySelector","firstChild","indexOf","display","elEditIcon","elEditorCancelOld","elEditorCancel","Modal","open","inherit","triggerEvent","elTdHost","elSpanHost","elTdDBName","elSpanDBName","Math","uuid","trList","children","lastTr","length","tdList","spanList","elPencil","console","log","documentReady"],"sources":["multidb.js"],"sourcesContent":["/**\n * @package   solo\n * @copyright Copyright (c)2014-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n// Object initialisation\nif (typeof akeeba == \"undefined\")\n{\n    var akeeba = {};\n}\n\nif (typeof akeeba.Multidb == \"undefined\")\n{\n    akeeba.Multidb = {\n        modalDialog: null\n    }\n}\n\n/**\n * Render the additional databases interface\n *\n * @param data\n */\nakeeba.Multidb.render = function (data)\n{\n    var tbody       = document.getElementById(\"ak_list_contents\");\n    tbody.innerHTML = \"\";\n\n    for (rootname in data)\n    {\n        if (!data.hasOwnProperty(rootname))\n        {\n            continue;\n        }\n\n        var def = data[rootname];\n\n        akeeba.Multidb.addRow(rootname, def, tbody);\n    }\n\n    akeeba.Multidb.addNewRecordButton(tbody);\n};\n\n/**\n * Add a single row to the additional databases interface\n *\n * @param root\n * @param def\n * @param append_to_here\n */\nakeeba.Multidb.addRow = function (root, def, append_to_here)\n{\n    var elTr = document.createElement(\"tr\");\n\n    elTr.className = \"ak_filter_row\";\n    akeeba.System.data.set(elTr, \"root\", root);\n    akeeba.System.data.set(elTr, \"def\", JSON.stringify(def));\n\n    // Delete button\n    var elTdDelete         = document.createElement(\"td\");\n    elTdDelete.style.width = \"2em\";\n\n    var elDeleteSpan       = document.createElement(\"span\");\n    elDeleteSpan.className = \"ak_filter_tab_icon_container akeeba-btn--red--mini\";\n    akeeba.System.addEventListener(elDeleteSpan, \"click\", function ()\n    {\n        var elRootNode = this.parentNode.parentNode;\n\n        var new_data = {\n            root: akeeba.System.data.get(elRootNode, \"root\"),\n            verb: \"remove\"\n        };\n\n        akeeba.Fsfilters.toggle(\n            new_data,\n            this,\n            function (response, caller)\n            {\n                if (response.success == true)\n                {\n                    var elRemove = caller.parentNode.parentNode;\n                    elRemove.parentNode.removeChild(elRemove);\n                }\n            }\n        );\n    });\n\n    var elDeleteIcon       = document.createElement(\"span\");\n    elDeleteIcon.className = \"ak-toggle-button deletebutton\";\n    elDeleteIcon.insertAdjacentHTML(\"beforeend\", \"<span class=\\\"akion-trash-a\\\"></span>\");\n\n    elDeleteSpan.appendChild(elDeleteIcon);\n\n    elTdDelete.appendChild(elDeleteSpan);\n\n    // Edit button\n    var elTdEdit         = document.createElement(\"td\");\n    elTdEdit.style.width = \"2em\";\n\n    var elEditSpan       = document.createElement(\"span\");\n    elEditSpan.className = \"ak_filter_tab_icon_container akeeba-btn--teal--mini\";\n    akeeba.System.addEventListener(elEditSpan, \"click\", function ()\n    {\n        var cache_element = this.parentNode.parentNode;\n        var cache_data    = JSON.parse(akeeba.System.data.get(cache_element, \"def\", \"{}\"));\n        var cache_root    = akeeba.System.data.get(cache_element, \"root\");\n        var editor        = document.getElementById(\"akEditorDialog\");\n\n        // Select the correct driver\n        if (cache_data.driver == \"\")\n        {\n            cache_data.driver = \"mysqli\";\n        }\n\n        // Set the parameters\n        document.getElementById(\"ake_driver\").value   = cache_data.driver;\n        document.getElementById(\"ake_host\").value     = cache_data.host;\n        document.getElementById(\"ake_username\").value = cache_data.username;\n        document.getElementById(\"ake_password\").value = cache_data.password;\n        document.getElementById(\"ake_database\").value = cache_data.database;\n        document.getElementById(\"ake_prefix\").value   = cache_data.prefix;\n\n        // Remove any leftover notifier\n        try\n        {\n            var elRemove = document.getElementById(\"ak_editor_notifier\");\n            elRemove.parentNode.removeChild(elRemove);\n        }\n        catch (e)\n        {\n        }\n\n        // Test connection button\n        /**\n         * Node cloning removes leftover event listeners preventing the bug in tickets #28300 and #28317.\n         *\n         * See https://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\n         */\n        var elEditorDefaultOld = document.getElementById(\"akEditorBtnDefault\");\n        var elEditorDefault    = elEditorDefaultOld.cloneNode(true);\n        elEditorDefaultOld.parentNode.replaceChild(elEditorDefault, elEditorDefaultOld);\n\n        akeeba.System.addEventListener(elEditorDefault, \"click\", function ()\n        {\n            // Remove any leftover notifier\n            try\n            {\n                var elRemove = document.getElementById(\"ak_editor_notifier\");\n                elRemove.parentNode.removeChild(elRemove);\n            }\n            catch (e)\n            {\n            }\n\n            // Create the placeholder div and show a loading message\n            var elAlertDiv       = document.createElement(\"div\");\n            elAlertDiv.className = \"akeeba-block--info\";\n            elAlertDiv.id        = \"ak_editor_notifier\";\n\n            var elSpanNotifierContent = document.createElement(\"p\");\n            elSpanNotifierContent.id  = \"ak_editor_notifier_content\";\n            elAlertDiv.appendChild(elSpanNotifierContent);\n\n            var elSpinner = document.createElement(\"img\");\n            elSpinner.setAttribute(\"border\", 0);\n            elSpinner.setAttribute(\"src\", akeeba.System.getOptions(\"akeeba.Multidb.loadingGif\", \"\"));\n            elSpanNotifierContent.appendChild(elSpinner);\n\n            var elLoadingText         = document.createElement(\"span\");\n            elLoadingText.textContent = akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_LOADING\");\n            elSpanNotifierContent.appendChild(elLoadingText);\n\n            var elEditorTable = document.getElementById(\"ak_editor_table\");\n            elEditorTable.insertAdjacentHTML(\"beforebegin\", elAlertDiv.outerHTML);\n\n            // Test the connection via AJAX\n            var elDriverDropdown = document.getElementById(\"ake_driver\");\n            var elSelectedOption = elDriverDropdown.options[elDriverDropdown.selectedIndex];\n            var driver           = (elSelectedOption == null) ? \"\" : elSelectedOption.value;\n            var req              = {\n                verb: \"test\",\n                root: root,\n                data: {\n                    host:     document.getElementById(\"ake_host\").value,\n                    driver:   driver,\n                    port:     document.getElementById(\"ake_port\").value,\n                    user:     document.getElementById(\"ake_username\").value,\n                    password: document.getElementById(\"ake_password\").value,\n                    database: document.getElementById(\"ake_database\").value,\n                    prefix:   document.getElementById(\"ake_prefix\").value\n                }\n            };\n\n            var query = {\n                akaction: JSON.stringify(req)\n            };\n\n            akeeba.System.doAjax(query, function (response)\n            {\n                var elEditorNotifierContent = document.getElementById(\"ak_editor_notifier_content\");\n\n                if (response.status == true)\n                {\n                    document.getElementById(\"ak_editor_notifier\").className = \"akeeba-block--success\";\n                    elEditorNotifierContent.textContent                     =\n                        akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTOK\");\n                }\n                else\n                {\n                    document.getElementById(\"ak_editor_notifier\").className = \"akeeba-block--failure\";\n                    elEditorNotifierContent.innerHTML                       =\n                        akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTFAIL\") +\n                        \"<br/>\" +\n                        \"<code>\" + response.message + \"</code>\";\n                }\n            }, function (message)\n            {\n                var elEditorNotifierContent = document.getElementById(\"ak_editor_notifier_content\");\n\n                document.getElementById(\"ak_editor_notifier\").className = \"akeeba-block--failure\";\n                elEditorNotifierContent.textContent                     =\n                    akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTFAIL\");\n\n                if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n                {\n                    akeeba.Multidb.modalDialog.close();\n                }\n\n                akeeba.System.params.errorCallback(message);\n            }, false, 15000);\n        });\n\n        // Save button\n        /**\n         * Node cloning removes leftover event listeners preventing the bug in tickets #28300 and #28317.\n         *\n         * See https://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\n         */\n        var elEditorSaveOld = document.getElementById(\"akEditorBtnSave\");\n        var elEditorSave    = elEditorSaveOld.cloneNode(true);\n        elEditorSaveOld.parentNode.replaceChild(elEditorSave, elEditorSaveOld);\n\n        akeeba.System.addEventListener(elEditorSave, \"click\", function ()\n        {\n            // Remove any leftover notifier\n            try\n            {\n                var elRemove = document.getElementById(\"ak_editor_notifier\");\n                elRemove.parentNode.removeChild(elRemove);\n            }\n            catch (e)\n            {\n            }\n\n            var elAlertDiv       = document.createElement(\"div\");\n            elAlertDiv.className = \"akeeba-block--info\";\n            elAlertDiv.id        = \"ak_editor_notifier\";\n\n            var elSpanNotifierContent = document.createElement(\"p\");\n            elSpanNotifierContent.id  = \"ak_editor_notifier_content\";\n            elAlertDiv.appendChild(elSpanNotifierContent);\n\n            var elSpinner = document.createElement(\"img\");\n            elSpinner.setAttribute(\"border\", 0);\n            elSpinner.setAttribute(\"src\", akeeba.System.getOptions(\"akeeba.Multidb.loadingGif\", \"\"));\n            elSpanNotifierContent.appendChild(elSpinner);\n\n            var elLoadingText         = document.createElement(\"span\");\n            elLoadingText.textContent = akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_LOADING\");\n            elSpanNotifierContent.appendChild(elLoadingText);\n\n            var elEditorTable = document.getElementById(\"ak_editor_table\");\n            elEditorTable.insertAdjacentHTML(\"beforebegin\", elAlertDiv.outerHTML);\n\n            // Send AJAX save request\n            var elDriverDropdown = document.getElementById(\"ake_driver\");\n            var elSelectedOption = elDriverDropdown.options[elDriverDropdown.selectedIndex];\n            var driver           = (elSelectedOption == null) ? \"\" : elSelectedOption.value;\n            var req              = {\n                verb: \"set\",\n                root: root,\n                data: {\n                    host:     document.getElementById(\"ake_host\").value,\n                    driver:   driver,\n                    port:     document.getElementById(\"ake_port\").value,\n                    username: document.getElementById(\"ake_username\").value,\n                    password: document.getElementById(\"ake_password\").value,\n                    database: document.getElementById(\"ake_database\").value,\n                    prefix:   document.getElementById(\"ake_prefix\").value,\n                    dumpFile: String(root).substr(0, 9) + document.getElementById(\"ake_database\").value + \".sql\"\n                }\n            };\n\n            var query = {\n                akaction: JSON.stringify(req)\n            };\n\n            akeeba.System.doAjax(query, function (response)\n            {\n                if (response != true)\n                {\n                    document.getElementById(\"ak_editor_notifier_content\").textContent =\n                        akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_SAVEFAIL\");\n\n                    return;\n                }\n\n                // Cache new data\n                akeeba.System.data.set(cache_element, \"def\", JSON.stringify(req.data));\n\n                // Update grid cells (host & db)\n                var cells = cache_element.querySelectorAll(\"td\");\n\n                cache_element.querySelector(\"span.ak_dbhost\").textContent = req.data.host;\n                cache_element.querySelector(\"span.ak_dbname\").textContent = req.data.database;\n\n                // Handle new row case\n                if (cache_element.querySelector(\"span.editbutton\").firstChild.className.indexOf(\"akion-edit\") == -1)\n                {\n                    // This was a new row. Add the normal buttons...\n                    cache_element.querySelector(\"span.deletebutton\").parentNode.style.display = \"inline-block\";\n\n                    var elEditIcon                  = cache_element.querySelector(\"span.editbutton\");\n                    elEditIcon.firstChild.className = \"akion-edit\";\n\n                    // ...then add a new \"add new row\" at the bottom.\n                    akeeba.Multidb.addNewRecordButton(cache_element.parentNode);\n                }\n\n                // Finally close the dialog\n                if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n                {\n                    akeeba.Multidb.modalDialog.close();\n                }\n\n            }, function (message)\n            {\n                document.getElementById(\"ak_editor_notifier_content\").textContent =\n                    akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_SAVEFAIL\");\n\n                if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n                {\n                    akeeba.Multidb.modalDialog.close();\n                }\n\n                akeeba.System.params.errorCallback(message);\n            }, false, 15000);\n        });\n\n        // Cancel button\n        /**\n         * Node cloning removes leftover event listeners preventing the bug in tickets #28300 and #28317.\n         *\n         * See https://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\n         */\n        var elEditorCancelOld = document.getElementById(\"akEditorBtnCancel\");\n        var elEditorCancel    = elEditorCancelOld.cloneNode(true);\n        elEditorCancelOld.parentNode.replaceChild(elEditorCancel, elEditorCancelOld);\n\n        akeeba.System.addEventListener(elEditorCancel, \"click\", function ()\n        {\n            // Close the dialog\n            if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n            {\n                akeeba.Multidb.modalDialog.close();\n            }\n        });\n\n        // Show editor\n        akeeba.Multidb.modalDialog = akeeba.Modal.open({\n            inherit: editor,\n            width:   \"80%\"\n        });\n\n        akeeba.System.triggerEvent(editor.querySelector(\"span\"), \"focus\");\n    });\n\n    var elEditIcon       = document.createElement(\"span\");\n    elEditIcon.className = \"editbutton ak-toggle-button\";\n    elEditIcon.insertAdjacentHTML(\"beforeend\", \"<span class=\\\"akion-edit\\\"></span>\");\n    elEditSpan.appendChild(elEditIcon);\n\n    elTdEdit.appendChild(elEditSpan);\n\n    // Database host\n    var elTdHost       = document.createElement(\"td\");\n    elTdHost.className = \"ak_filter_item\";\n\n    var elSpanHost         = document.createElement(\"span\");\n    elSpanHost.className   = \"ak_filter_name ak_dbhost\";\n    elSpanHost.textContent = def.host;\n    elTdHost.appendChild(elSpanHost);\n\n    // Database name\n    var elTdDBName       = document.createElement(\"td\");\n    elTdDBName.className = \"ak_filter_item\";\n\n    var elSpanDBName         = document.createElement(\"span\");\n    elSpanDBName.className   = \"ak_filter_name ak_dbname\";\n    elSpanDBName.textContent = def.database;\n    elTdDBName.appendChild(elSpanDBName);\n\n    elTr.appendChild(elTdDelete);\n    elTr.appendChild(elTdEdit);\n    elTr.appendChild(elTdHost);\n    elTr.appendChild(elTdDBName);\n    append_to_here.appendChild(elTr);\n};\n\nakeeba.Multidb.addNewRecordButton = function (append_to_here)\n{\n    var root      = Math.uuid();\n    var dummyData = {\n        host:     \"\",\n        port:     \"\",\n        username: \"\",\n        password: \"\",\n        database: \"\",\n        prefix:   \"\"\n    };\n    akeeba.Multidb.addRow(root, dummyData, append_to_here);\n\n    var trList = document.getElementById(\"ak_list_contents\").children;\n    var lastTr = trList[trList.length - 1];\n\n    var tdList = lastTr.querySelectorAll(\"td\");\n\n    tdList[0].querySelector(\"span\").style.display = \"none\";\n\n    var spanList = tdList[1].querySelectorAll(\"span\");\n    var elPencil = spanList[spanList.length - 1];\n\n    console.log(spanList, elPencil);\n\n    elPencil.className = \"akion-plus\";\n};\n\nakeeba.System.documentReady(function ()\n{\n    akeeba.Multidb.render(akeeba.System.getOptions(\"akeeba.Multidb.guiData\", {}));\n});\n"],"mappings":"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"}