function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Multidb&&(akeeba.Multidb={modalDialog:null}),akeeba.Multidb.render=function(a){var b=document.getElementById("ak_list_contents");for(rootname in b.innerHTML="",a)if(a.hasOwnProperty(rootname)){var c=a[rootname];akeeba.Multidb.addRow(rootname,c,b)}akeeba.Multidb.addNewRecordButton(b)},akeeba.Multidb.addRow=function(a,b,c){var d=document.createElement("tr");d.className="ak_filter_row",akeeba.System.data.set(d,"root",a),akeeba.System.data.set(d,"def",JSON.stringify(b));var e=document.createElement("td");e.style.width="2em";var f=document.createElement("span");f.className="ak_filter_tab_icon_container akeeba-btn--red--mini",akeeba.System.addEventListener(f,"click",function(){var a=this.parentNode.parentNode,b={root:akeeba.System.data.get(a,"root"),verb:"remove"};akeeba.Fsfilters.toggle(b,this,function(a,b){if(!0==a.success){var c=b.parentNode.parentNode;c.parentNode.removeChild(c)}})});var g=document.createElement("span");g.className="ak-toggle-button deletebutton",g.insertAdjacentHTML("beforeend","<span class=\"akion-trash-a\"></span>"),f.appendChild(g),e.appendChild(f);var h=document.createElement("td");h.style.width="2em";var i=document.createElement("span");i.className="ak_filter_tab_icon_container akeeba-btn--teal--mini",akeeba.System.addEventListener(i,"click",function(){var b=this.parentNode.parentNode,c=JSON.parse(akeeba.System.data.get(b,"def","{}")),d=akeeba.System.data.get(b,"root"),e=document.getElementById("akEditorDialog");""==c.driver&&(c.driver="mysqli"),document.getElementById("ake_driver").value=c.driver,document.getElementById("ake_host").value=c.host,document.getElementById("ake_username").value=c.username,document.getElementById("ake_password").value=c.password,document.getElementById("ake_database").value=c.database,document.getElementById("ake_prefix").value=c.prefix;try{var f=document.getElementById("ak_editor_notifier");f.parentNode.removeChild(f)}catch(a){}var g=document.getElementById("akEditorBtnDefault"),h=g.cloneNode(!0);g.parentNode.replaceChild(h,g),akeeba.System.addEventListener(h,"click",function(){try{var b=document.getElementById("ak_editor_notifier");b.parentNode.removeChild(b)}catch(a){}var c=document.createElement("div");c.className="akeeba-block--info",c.id="ak_editor_notifier";var d=document.createElement("p");d.id="ak_editor_notifier_content",c.appendChild(d);var e=document.createElement("img");e.setAttribute("border",0),e.setAttribute("src",akeeba.System.getOptions("akeeba.Multidb.loadingGif","")),d.appendChild(e);var f=document.createElement("span");f.textContent=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_LOADING"),d.appendChild(f);var g=document.getElementById("ak_editor_table");g.insertAdjacentHTML("beforebegin",c.outerHTML);var h=document.getElementById("ake_driver"),i=h.options[h.selectedIndex],j=null==i?"":i.value,k={verb:"test",root:a,data:{host:document.getElementById("ake_host").value,driver:j,port:document.getElementById("ake_port").value,user:document.getElementById("ake_username").value,password:document.getElementById("ake_password").value,database:document.getElementById("ake_database").value,prefix:document.getElementById("ake_prefix").value}},l={akaction:JSON.stringify(k)};akeeba.System.doAjax(l,function(a){var b=document.getElementById("ak_editor_notifier_content");!0==a.status?(document.getElementById("ak_editor_notifier").className="akeeba-block--success",b.textContent=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTOK")):(document.getElementById("ak_editor_notifier").className="akeeba-block--failure",b.innerHTML=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTFAIL")+"<br/><code>"+a.message+"</code>")},function(a){var b=document.getElementById("ak_editor_notifier_content");document.getElementById("ak_editor_notifier").className="akeeba-block--failure",b.textContent=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTFAIL"),"object"==_typeof(akeeba.Multidb.modalDialog)&&akeeba.Multidb.modalDialog.close&&akeeba.Multidb.modalDialog.close(),akeeba.System.params.errorCallback(a)},!1,15e3)});var i=document.getElementById("akEditorBtnSave"),j=i.cloneNode(!0);i.parentNode.replaceChild(j,i),akeeba.System.addEventListener(j,"click",function(){try{var c=document.getElementById("ak_editor_notifier");c.parentNode.removeChild(c)}catch(a){}var d=document.createElement("div");d.className="akeeba-block--info",d.id="ak_editor_notifier";var e=document.createElement("p");e.id="ak_editor_notifier_content",d.appendChild(e);var f=document.createElement("img");f.setAttribute("border",0),f.setAttribute("src",akeeba.System.getOptions("akeeba.Multidb.loadingGif","")),e.appendChild(f);var g=document.createElement("span");g.textContent=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_LOADING"),e.appendChild(g);var h=document.getElementById("ak_editor_table");h.insertAdjacentHTML("beforebegin",d.outerHTML);var i=document.getElementById("ake_driver"),j=i.options[i.selectedIndex],k=null==j?"":j.value,l={verb:"set",root:a,data:{host:document.getElementById("ake_host").value,driver:k,port:document.getElementById("ake_port").value,username:document.getElementById("ake_username").value,password:document.getElementById("ake_password").value,database:document.getElementById("ake_database").value,prefix:document.getElementById("ake_prefix").value,dumpFile:(a+"").substr(0,9)+document.getElementById("ake_database").value+".sql"}},m={akaction:JSON.stringify(l)};akeeba.System.doAjax(m,function(a){if(!0!=a)return void(document.getElementById("ak_editor_notifier_content").textContent=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_SAVEFAIL"));akeeba.System.data.set(b,"def",JSON.stringify(l.data));b.querySelectorAll("td");if(b.querySelector("span.ak_dbhost").textContent=l.data.host,b.querySelector("span.ak_dbname").textContent=l.data.database,-1==b.querySelector("span.editbutton").firstChild.className.indexOf("akion-edit")){b.querySelector("span.deletebutton").parentNode.style.display="inline-block";var c=b.querySelector("span.editbutton");c.firstChild.className="akion-edit",akeeba.Multidb.addNewRecordButton(b.parentNode)}"object"==_typeof(akeeba.Multidb.modalDialog)&&akeeba.Multidb.modalDialog.close&&akeeba.Multidb.modalDialog.close()},function(a){document.getElementById("ak_editor_notifier_content").textContent=akeeba.System.Text._("COM_AKEEBA_MULTIDB_GUI_LBL_SAVEFAIL"),"object"==_typeof(akeeba.Multidb.modalDialog)&&akeeba.Multidb.modalDialog.close&&akeeba.Multidb.modalDialog.close(),akeeba.System.params.errorCallback(a)},!1,15e3)});var k=document.getElementById("akEditorBtnCancel"),l=k.cloneNode(!0);k.parentNode.replaceChild(l,k),akeeba.System.addEventListener(l,"click",function(){"object"==_typeof(akeeba.Multidb.modalDialog)&&akeeba.Multidb.modalDialog.close&&akeeba.Multidb.modalDialog.close()}),akeeba.Multidb.modalDialog=akeeba.Modal.open({inherit:e,width:"80%"}),akeeba.System.triggerEvent(e.querySelector("span"),"focus")});var j=document.createElement("span");j.className="editbutton ak-toggle-button",j.insertAdjacentHTML("beforeend","<span class=\"akion-edit\"></span>"),i.appendChild(j),h.appendChild(i);var k=document.createElement("td");k.className="ak_filter_item";var l=document.createElement("span");l.className="ak_filter_name ak_dbhost",l.textContent=b.host,k.appendChild(l);var m=document.createElement("td");m.className="ak_filter_item";var n=document.createElement("span");n.className="ak_filter_name ak_dbname",n.textContent=b.database,m.appendChild(n),d.appendChild(e),d.appendChild(h),d.appendChild(k),d.appendChild(m),c.appendChild(d)},akeeba.Multidb.addNewRecordButton=function(a){var b=Math.uuid();akeeba.Multidb.addRow(b,{host:"",port:"",username:"",password:"",database:"",prefix:""},a);var c=document.getElementById("ak_list_contents").children,d=c[c.length-1],e=d.querySelectorAll("td");e[0].querySelector("span").style.display="none";var f=e[1].querySelectorAll("span"),g=f[f.length-1];console.log(f,g),g.className="akion-plus"},akeeba.System.documentReady(function(){akeeba.Multidb.render(akeeba.System.getOptions("akeeba.Multidb.guiData",{}))});

//# sourceMappingURL=multidb.min.js.map