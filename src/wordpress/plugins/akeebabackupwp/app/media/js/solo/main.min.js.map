{"version":3,"file":"main.min.js","names":["akeeba","ControlPanel","outputDirUnderSiteRoot","hasSecurityFiles","displayCloudFlareWarning","testfile","localStorage","getItem","document","getElementById","style","display","isReadableFile","myURL","callback","Ajax","ajax","type","success","responseText","length","apply","getUpdateInformation","updateInformationUrl","msg","extracted","System","extractResponse","isValid","data","elUpdateContainer","elUpdateIcon","hasUpdate","className","innerHTML","noticeHTML","showChangelog","Modal","open","inherit","width","checkOutputFolderSecurity","getOptions","doAjax","ajaxURL","readFile","hasOwnProperty","listFolder","isSystem","hasRandom","warnAboutAdBlocker","elAdBlockBanner","testElement","createElement","body","appendChild","window","setTimeout","offsetHeight","remove","documentReady","addEventListener","forms","profileForm","submit","querySelectorAll","forEach","item","parentElement","notification","askPermission"],"sources":["main.js"],"sourcesContent":["/**\n * @package   solo\n * @copyright Copyright (c)2014-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n// Object initialisation\nif (typeof akeeba === \"undefined\")\n{\n    var akeeba = {};\n}\n\nif (typeof akeeba.ControlPanel === \"undefined\")\n{\n    akeeba.ControlPanel = {\n        outputDirUnderSiteRoot: false,\n        hasSecurityFiles:       false\n    }\n}\n\n/* Warn about CloudFlare Rocket Loader */\nakeeba.ControlPanel.displayCloudFlareWarning = function (testfile)\n{\n    if (!localStorage.getItem(testfile))\n    {\n        return;\n    }\n\n    document.getElementById(\"cloudFlareWarn\").style.display = \"block\";\n};\n\nakeeba.ControlPanel.isReadableFile = function (myURL, callback)\n{\n    if (!myURL)\n    {\n        return;\n    }\n\n    akeeba.Ajax.ajax(myURL, {\n        type:    \"GET\",\n        success: function (responseText, statusText, xhr)\n                 {\n                     if (responseText.length > 0)\n                     {\n                         callback.apply();\n                     }\n                 }\n    });\n};\n\nakeeba.ControlPanel.getUpdateInformation = function (updateInformationUrl)\n{\n    akeeba.Ajax.ajax(updateInformationUrl, {\n        type:    \"GET\",\n        success: function (msg)\n                 {\n                     var extracted = akeeba.System.extractResponse(msg);\n\n                     if (!extracted.isValid)\n                     {\n                         return;\n                     }\n\n                     var data              = extracted.data;\n                     var elUpdateContainer = document.getElementById(\"soloUpdateContainer\");\n                     var elUpdateIcon      = document.getElementById(\"soloUpdateIcon\");\n\n                     if ((elUpdateContainer === null) || (elUpdateIcon === null))\n                     {\n                         return;\n                     }\n\n                     if (data.hasUpdate)\n                     {\n                         elUpdateContainer.className                                  = \"akeeba-action--orange\";\n                         elUpdateIcon.className                                       = \"akion-android-warning\";\n                         document.getElementById(\"soloUpdateAvailable\").style.display = \"inline-block\";\n                         document.getElementById(\"soloUpdateUpToDate\").style.display  = \"none\";\n\n                         document.getElementById(\"soloUpdateNotification\").innerHTML = data.noticeHTML;\n                     }\n                     else\n                     {\n                         elUpdateContainer.className                                  = \"akeeba-action--green\";\n                         elUpdateIcon.className                                       = \"akion-checkmark-circled\";\n                         document.getElementById(\"soloUpdateAvailable\").style.display = \"none\";\n                         document.getElementById(\"soloUpdateUpToDate\").style.display  = \"inline-block\";\n                     }\n                 }\n    });\n\n};\n\n/**\n * Displays the changelog in a popup box\n */\nakeeba.ControlPanel.showChangelog = function ()\n{\n    akeeba.Modal.open({\n        inherit: \"#akeeba-changelog\",\n        width:   \"80%\"\n    });\n};\n\nakeeba.ControlPanel.checkOutputFolderSecurity = function ()\n{\n    if (!akeeba.System.getOptions(\"akeeba.ControlPanel.outputDirUnderSiteRoot\", false))\n    {\n        return;\n    }\n\n    akeeba.System.doAjax({\n            ajaxURL: akeeba.System.getOptions(\"akeeba.ControlPanel.checkOutDirUrl\")\n        }, function (data)\n        {\n            var readFile   = data.hasOwnProperty(\"readFile\") ? data.readFile : false;\n            var listFolder = data.hasOwnProperty(\"listFolder\") ? data.listFolder : false;\n            var isSystem   = data.hasOwnProperty(\"isSystem\") ? data.isSystem : false;\n            var hasRandom  = data.hasOwnProperty(\"hasRandom\") ? data.hasRandom : true;\n\n            if (listFolder && isSystem)\n            {\n                document.getElementById(\"outDirSystem\").style.display = \"block\";\n            }\n            else if (listFolder)\n            {\n                document.getElementById(\"insecureOutputDirectory\").style.display = \"block\";\n            }\n            else if (readFile && !listFolder && !hasRandom)\n            {\n                if (!akeeba.System.getOptions(\"akeeba.ControlPanel.hasSecurityFiles\", true))\n                {\n                    document.getElementById(\"insecureOutputDirectory\").style.display = \"block\";\n\n                    return;\n                }\n\n                if (!hasRandom)\n                {\n                    document.getElementById(\"missingRandomFromFilename\").style.display = \"block\";\n                }\n            }\n        }, function (message)\n        {\n            // I can ignore errors for this AJAX requesy\n        }, false\n    );\n};\n\nakeeba.ControlPanel.warnAboutAdBlocker = function ()\n{\n    var elAdBlockBanner = document.getElementById(\"adblock-warning\");\n\n    if (typeof elAdBlockBanner !== \"object\")\n    {\n        return;\n    }\n\n    var testElement       = document.createElement(\"div\");\n    testElement.innerHTML = \"&nbsp;\";\n    testElement.className = \"adsbox\";\n\n    document.body.appendChild(testElement);\n\n    window.setTimeout(function ()\n    {\n        if (testElement.offsetHeight === 0)\n        {\n            document.getElementById(\"adblock-warning\").style.display = \"block\";\n        }\n        testElement.remove();\n    }, 250);\n};\n\n// Initialization\nakeeba.System.documentReady(function ()\n{\n    akeeba.System.addEventListener(\"comAkeebaControlPanelProfileSwitch\", \"change\", function ()\n    {\n        document.forms.profileForm.submit();\n    });\n\n    document.querySelectorAll(\".oneclick\").forEach(function(item){\n        akeeba.System.addEventListener(item, \"click\", function(){\n            item.parentElement.submit();\n\n            return false;\n        })\n    })\n\n    akeeba.System.addEventListener(\"btnchangelog\", \"click\", akeeba.ControlPanel.showChangelog);\n\n    akeeba.ControlPanel.displayCloudFlareWarning(akeeba.System.getOptions(\"akeeba.ControlPanel.cloudFlareURN\"));\n    akeeba.ControlPanel.getUpdateInformation(akeeba.System.getOptions(\"akeeba.ControlPanel.updateInfoURL\"));\n    akeeba.ControlPanel.checkOutputFolderSecurity();\n    akeeba.ControlPanel.warnAboutAdBlocker();\n\n    if (akeeba.System.getOptions(\"akeeba.System.notification.hasDesktopNotification\", false))\n    {\n        akeeba.System.notification.askPermission();\n    }\n});"],"mappings":"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"}