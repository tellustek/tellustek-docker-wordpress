if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Regexdbfilters&&(akeeba.Regexdbfilters={currentRoot:null}),akeeba.Regexdbfilters.activeRootChanged=function(){var a=document.getElementById("active-root");akeeba.Regexdbfilters.load(a.options[a.selectedIndex].value)},akeeba.Regexdbfilters.load=function(a){var b={akaction:JSON.stringify({root:a,verb:"list"})};akeeba.System.doAjax(b,function(a){akeeba.Regexdbfilters.render(a)},null,!1,15e3)},akeeba.Regexdbfilters.render=function(a){var b=document.getElementById("ak_list_contents");b.innerHTML="";for(var c,d=0;d<a.length;d++)c=a[d],akeeba.Regexdbfilters.addRow(c,b);akeeba.Regexdbfilters.addNewRow(b)},akeeba.Regexdbfilters.addRow=function(a,b){var c=document.createElement("tr");b.appendChild(c);var d="akion-edit";""==a.item&&(d="akion-plus");var e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("span");f.className="table-icon-container akeeba-btn--teal--mini edit ak-toggle-button",f.insertAdjacentHTML("beforeend","<span class=\""+d+"\"></span>"),akeeba.System.addEventListener(f,"click",function(){var d=["regextables","regextabledata"],e=document.createElement("select");e.setAttribute("name","type"),e.className="type-select";for(var f=0;f<d.length;f++){var g=d[f],h="COM_AKEEBA_DBFILTER_TYPE_"+(g+"").toUpperCase(),j=akeeba.System.Text._(h),k=document.createElement("option");k.setAttribute("value",g),k.textContent=j,g==a.type&&k.setAttribute("selected","selected"),e.appendChild(k)}c.querySelector("td.ak-type span").style.display="none",c.querySelector("td.ak-type").appendChild(e);var l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("name","item"),l.setAttribute("size","100"),l.value=a.item,c.querySelector("td.ak-item tt").style.display="none",c.querySelector("td.ak-item").appendChild(l);var m=c.children[0];m.querySelector("span.edit").style.display="none",m.querySelector("span.delete").style.display="none";var n=document.createElement("span");m.appendChild(n),n.className="table-icon-container akeeba-btn--teal--mini save ak-toggle-button",n.insertAdjacentHTML("beforeend","<span class=\"akion-checkmark\"></span>"),akeeba.System.addEventListener(n,"click",function(){var d=c.children[0];d.querySelector("span.delete").style.display="none";var f=e.options[e.selectedIndex].value,g=l.value;if(""==trim(g))return""==a.item?void akeeba.System.triggerEvent(d.querySelector("span.cancel"),"click"):void akeeba.System.triggerEvent(d.querySelector("span.delete"),"click");var h=document.getElementById("active_root"),i={verb:"set",type:f,node:g,root:h.options[h.selectedIndex].value};console.debug(i),akeeba.Fsfilters.toggle(i,this,function(){var d=""!=a.item&&""!=a.type&&(a.item!=g||a.type!=f),e=""==a.item||""==a.type,h=c.children[0];if(""==a.item){var j=h.querySelector("span.edit").firstChild;j.className=j.className.replace("akion-plus","akion-edit")}i.type=a.type,i.node=a.item,a.type=f,a.item=g;var k="COM_AKEEBA_DBFILTER_TYPE_"+(a.type+"").toUpperCase();c.querySelector("td.ak-type span").textContent=akeeba.System.Text._(k),c.querySelector("td.ak-item tt").textContent=escapeHTML(a.item),akeeba.System.triggerEvent(h.querySelector("span.cancel"),"click"),d?(i.verb="remove",akeeba.Fsfilters.toggle(i,this,function(){},!1)):(a.item!=g||a.type!=f||e)&&akeeba.Regexdbfilters.addNewRow(b)},!1)});var o=document.createElement("span");m.appendChild(o),o.className="table-icon-container akeeba-btn--orange--mini cancel ak-toggle-button",o.insertAdjacentHTML("beforeend","<span class=\"akion-close\"></span>"),akeeba.System.addEventListener(o,"click",function(){var b=c.children[0],d=b.querySelector("span.save");d.parentNode.removeChild(d),d=b.querySelector("span.cancel"),d.parentNode.removeChild(d),b.querySelector("span.edit").style.display="inline-block",""!=a.item&&(b.querySelector("span.delete").style.display="inline-block"),e.parentNode.removeChild(e),c.querySelector("td.ak-type span").style.display="inline-block",l.parentNode.removeChild(l),c.querySelector("td.ak-item tt").style.display="inline-block"})}),g.className="table-icon-container akeeba-btn--red--mini delete ak-toggle-button",g.insertAdjacentHTML("beforeend","<span class=\"akion-trash-a\"></span>"),akeeba.System.addEventListener(g,"click",function(){var d=document.getElementById("active_root"),e={verb:"remove",type:a.type,node:a.item,root:d.options[d.selectedIndex].value};akeeba.Fsfilters.toggle(e,this,function(){c.remove(),""==a.item&&akeeba.Regexdbfilters.addNewRow(b)},!1)}),e.appendChild(f),e.appendChild(g),c.appendChild(e),""==a.item&&(e.querySelector("span.delete").style.display="none");var h="COM_AKEEBA_DBFILTER_TYPE_"+(a.type+"").toUpperCase(),i=akeeba.System.Text._(h);""==a.type&&(i="");var j=document.createElement("td");j.className="ak-type",j.innerHTML="<span>"+i+"</span>",c.appendChild(j);var k=document.createElement("td");k.className="ak-item",k.innerHTML="<tt>"+(null==a.item?"":escapeHTML(a.item))+"</tt>",c.appendChild(k)},akeeba.Regexdbfilters.addNewRow=function(a){akeeba.Regexdbfilters.addRow({type:"",item:""},a)},akeeba.System.documentReady(function(){akeeba.System.addEventListener("active_root","change",akeeba.Regexdbfilters.activeRootChanged),akeeba.Regexdbfilters.render(akeeba.System.getOptions("akeeba.RegExDatabaseFilters.guiData",{}))});

//# sourceMappingURL=regexdbfilters.min.js.map