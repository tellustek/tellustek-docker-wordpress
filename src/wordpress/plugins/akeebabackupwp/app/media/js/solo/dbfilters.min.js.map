{"version":3,"file":"dbfilters.min.js","names":["akeeba","Dbfilters","currentRoot","activeRootChanged","elRoot","document","getElementById","data","root","options","selectedIndex","value","load","activeTabRootChanged","loadTab","verb","new_data","akaction","JSON","stringify","System","doAjax","response","render","toggle","caller","callback","Fsfilters","aktables","table","innerHTML","tables","hasOwnProperty","dbef","uielement","createElement","className","available_filters","counter","length","filter","ui_icon","setAttribute","Text","_","toUpperCase","insertAdjacentHTML","removeClass","addClass","addEventListener","node","appendChild","iconclass","icontip","type","uiTableNameContainer","uiTableSizeContainer","uiTableType","uiSeparator","textContent","rows","uiTableTypeIcon","uiSeparatorIcon","style","color","renderTab","addRow","def","append_to_here","type_text","elRow","elFilterType","elFilterItem","elDeleteContainer","elEditContainer","elFilterName","elRemove","parentNode","removeChild","success","elDeleteIcon","inputBox","querySelector","display","elInput","new_value","that","triggerEvent","old_node","new_node","focus","elEditIcon","addNew","filtertype","children","trList","lastTr","tbody","excludeNonCMS","element","tablename","prefix","substr","iconContainer","icon","indexOf","nuke","documentReady","guiData","getOptions","viewType"],"sources":["dbfilters.js"],"sourcesContent":["/**\n * @package   solo\n * @copyright Copyright (c)2014-2023 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n// Object initialisation\nif (typeof akeeba == \"undefined\")\n{\n\tvar akeeba = {};\n}\n\nif (typeof akeeba.Dbfilters == \"undefined\")\n{\n\takeeba.Dbfilters = {\n\t\tcurrentRoot: null\n\t}\n}\n\nakeeba.Dbfilters.activeRootChanged = function ()\n{\n\tvar elRoot = document.getElementById(\"active_root\");\n\tvar data   = {\n\t\troot: elRoot.options[elRoot.selectedIndex].value\n\t};\n\takeeba.Dbfilters.load(data);\n};\n\nakeeba.Dbfilters.activeTabRootChanged = function ()\n{\n\tvar elRoot = document.getElementById(\"active_root\");\n\takeeba.Dbfilters.loadTab(elRoot.options[elRoot.selectedIndex].value);\n};\n\n/**\n * Loads the contents of a database\n *\n * @param data\n */\nakeeba.Dbfilters.load = function (data)\n{\n\t// Add the verb to the data\n\tdata.verb = \"list\";\n\n\t// Assemble the data array and send the AJAX request\n\tvar new_data = {\n\t\takaction: JSON.stringify(data)\n\t};\n\n\takeeba.System.doAjax(new_data, function (response)\n\t{\n\t\takeeba.Dbfilters.render(response);\n\t}, null, false, 15000);\n};\n\n/**\n * Toggles a database filter\n * @param data\n * @param caller\n */\nakeeba.Dbfilters.toggle = function (data, caller, callback)\n{\n\takeeba.Fsfilters.toggle(data, caller, callback);\n};\n\n/**\n * Renders the Database Filters page\n * @param data\n * @return\n */\nakeeba.Dbfilters.render = function (data)\n{\n\takeeba.Dbfilters.currentRoot = data.root;\n\n\t// ----- Render the tables\n\tvar aktables       = document.getElementById(\"tables\");\n\taktables.innerHTML = \"\";\n\n\tfor (var table in data.tables)\n\t{\n\t\tif (!data.tables.hasOwnProperty(table))\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\n\t\tdbef = data.tables[table];\n\n\t\tvar uielement       = document.createElement(\"div\");\n\t\tuielement.className = \"table-container\";\n\n\t\tvar available_filters = [\"tables\", \"tabledata\"];\n\n\t\tfor (var counter = 0; counter < available_filters.length; counter++)\n\t\t{\n\t\t\tvar filter = available_filters[counter];\n\n\t\t\tvar ui_icon       = document.createElement(\"span\");\n\t\t\tui_icon.className = \"table-icon-container akeeba-btn--grey akeeba-btn--mini\";\n\t\t\tui_icon.setAttribute(\"title\", akeeba.System.Text._(\"COM_AKEEBA_DBFILTER_TYPE_\" + filter.toUpperCase()));\n\n\t\t\tswitch (filter)\n\t\t\t{\n\t\t\t\tcase \"tables\":\n\t\t\t\t\tui_icon.insertAdjacentHTML(\n\t\t\t\t\t\t\"beforeend\",\n\t\t\t\t\t\t\"<span class=\\\"ak-toggle-button akion-close-circled\\\"></span>\"\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"tabledata\":\n\t\t\t\t\tui_icon.insertAdjacentHTML(\"beforeend\", \"<span class=\\\"ak-toggle-button akion-ios-box\\\"></span>\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch (dbef[filter])\n\t\t\t{\n\t\t\t\tcase 2:\n\t\t\t\t\takeeba.System.removeClass(ui_icon, \"akeeba-btn--grey\");\n\t\t\t\t\takeeba.System.addClass(ui_icon, \"akeeba-btn--red\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\takeeba.System.removeClass(ui_icon, \"akeeba-btn--grey\");\n\t\t\t\t\takeeba.System.addClass(ui_icon, \"akeeba-btn--orange\");\n\t\t\t\t// Don't break; we have to add the handler!\n\n\t\t\t\tcase 0:\n\t\t\t\t\takeeba.System.addEventListener(ui_icon, \"click\", function (ui_icon, table, filter)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar new_data = {\n\t\t\t\t\t\t\t\troot:   data.root,\n\t\t\t\t\t\t\t\tnode:   table,\n\t\t\t\t\t\t\t\tfilter: filter,\n\t\t\t\t\t\t\t\tverb:   \"toggle\"\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\takeeba.Dbfilters.toggle(new_data, ui_icon);\n\t\t\t\t\t\t};\n\t\t\t\t\t}(ui_icon, table, filter))\n\t\t\t}\n\n\t\t\tuielement.appendChild(ui_icon);\n\n\t\t\t/**\n\t\t\t * DO NOT move this before we add the akion-* span. This would make the icon the last child of the button\n\t\t\t * anchor tag which results in a smaller amount of margin to the right of the icon, making the buttons\n\t\t\t * look squished. Putting this JS call after we have rendered the icon causes the tooltip markup to be added\n\t\t\t * after the icon, therefore the CSS renders an equal margin to the left and right of the icon. As a result\n\t\t\t * the button looks nice and wide.\n\t\t\t */\n\t\t\t//akeeba.Tooltip.simpleTooltip(ui_icon);\n\t\t}\n\n\n\t\t// Add the table label\n\t\tvar iconclass = \"akion-link\";\n\t\tvar icontip   = \"COM_AKEEBA_DBFILTER_TABLE_MISC\";\n\n\t\tswitch (dbef.type)\n\t\t{\n\t\t\tcase \"table\":\n\t\t\t\ticonclass = \"akion-ios-grid-view\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_TABLE\";\n\t\t\t\tbreak;\n\t\t\tcase \"view\":\n\t\t\t\ticonclass = \"akion-android-list\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_VIEW\";\n\t\t\t\tbreak;\n\t\t\tcase \"procedure\":\n\t\t\t\ticonclass = \"akion-cube\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_PROCEDURE\";\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\ticonclass = \"akion-ion-code\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_FUNCTION\";\n\t\t\t\tbreak;\n\t\t\tcase \"trigger\":\n\t\t\t\ticonclass = \"akion-flash\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_TRIGGER\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tvar uiTableNameContainer = document.createElement(\"span\");\n\t\tvar uiTableSizeContainer = document.createElement(\"span\");\n\t\tvar uiTableType          = document.createElement(\"span\");\n\t\tvar uiSeparator          = document.createElement(\"span\");\n\n\t\tuiTableNameContainer.className   = \"table-name\";\n\t\tuiTableNameContainer.textContent = table;\n\n\t\tuiTableSizeContainer.className = \"table-rowcount\";\n\n\t\tif (dbef.rows)\n\t\t{\n\t\t\tuiTableSizeContainer.textContent = dbef.rows;\n\t\t\tuiTableSizeContainer.setAttribute(\"title\", akeeba.System.Text._(\"COM_AKEEBA_DBFILTER_TABLE_META_ROWCOUNT\"));\n\t\t\tuiTableSizeContainer.setAttribute(\"data-akeeba-tooltip-position\", \"left\");\n\t\t\t//akeeba.Tooltip.simpleTooltip(uiTableSizeContainer);\n\t\t}\n\n\t\tuiTableType.className = \"table-icon-container table-icon-noclick table-icon-small\";\n\t\tuiTableType.setAttribute(\"title\", akeeba.System.Text._(icontip));\n\t\t// uiTableType.setAttribute(\"data-akeeba-tooltip-position\", \"bottom\");\n\t\t//akeeba.Tooltip.simpleTooltip(uiTableType);\n\n\t\tvar uiTableTypeIcon       = document.createElement(\"span\");\n\t\tuiTableTypeIcon.className = iconclass;\n\t\tuiTableType.appendChild(uiTableTypeIcon);\n\n\t\tuiSeparator.className       = \"table-icon-container table-icon-noclick table-icon-small\";\n\t\tvar uiSeparatorIcon         = document.createElement(\"span\");\n\t\tuiSeparatorIcon.className   = \"akion-android-more-vertical\";\n\t\tuiSeparatorIcon.style.color = \"#cccccc\";\n\t\tuiSeparator.appendChild(uiSeparatorIcon);\n\n\t\tuielement.appendChild(uiSeparator);\n\t\tuielement.appendChild(uiTableType);\n\t\tuielement.appendChild(uiTableNameContainer);\n\t\tuielement.appendChild(uiTableSizeContainer);\n\n\t\t// Render\n\t\taktables.appendChild(uielement);\n\t}\n\n};\n\n/**\n * Loads the tabular view of the Database Filter for a given root\n * @param root\n * @return\n */\nakeeba.Dbfilters.loadTab = function (root)\n{\n\tvar data = {\n\t\tverb: \"tab\",\n\t\troot: root\n\t};\n\n\t// Assemble the data array and send the AJAX request\n\tvar new_data = {\n\t\takaction: JSON.stringify(data)\n\t};\n\n\takeeba.System.doAjax(new_data, function (response)\n\t{\n\t\takeeba.Dbfilters.renderTab(response);\n\t}, null, false, 15000);\n};\n\n/**\n * Add a row in the tabular view of the Filesystems Filter\n * @param def\n * @param append_to_here\n * @return\n */\nakeeba.Dbfilters.addRow = function (def, append_to_here)\n{\n\t// Turn def.type into something human readable\n\tvar type_text = akeeba.System.Text._(\"COM_AKEEBA_DBFILTER_TYPE_\" + def.type.toUpperCase());\n\n\tif (type_text == null)\n\t{\n\t\ttype_text = def.type;\n\t}\n\n\tvar elRow        = document.createElement(\"tr\");\n\tvar elFilterType = document.createElement(\"td\");\n\tvar elFilterItem = document.createElement(\"td\");\n\n\telRow.className = \"ak_filter_row\";\n\n\t// Filter title\n\telFilterType.className   = \"ak_filter_type\";\n\telFilterType.textContent = type_text;\n\n\t// Filter item\n\telFilterItem.className = \"ak_filter_item\";\n\n\t// delete button, edit button, filter name\n\tvar elDeleteContainer = document.createElement(\"span\");\n\tvar elEditContainer   = document.createElement(\"span\");\n\tvar elFilterName      = document.createElement(\"span\");\n\n\telDeleteContainer.className = \"ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--red\";\n\takeeba.System.addEventListener(elDeleteContainer, \"click\", function ()\n\t{\n\t\tif (def.node == \"\")\n\t\t{\n\t\t\t// An empty filter is normally not saved to the database; it's a new record row which has to be removed...\n\t\t\tvar elRemove = this.parentNode.parentNode;\n\t\t\telRemove.parentNode.removeChild(elRemove);\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar elRoot   = document.getElementById(\"active_root\");\n\t\tvar new_data = {\n\t\t\troot:   elRoot.options[elRoot.selectedIndex].value,\n\t\t\tnode:   def.node,\n\t\t\tfilter: def.type,\n\t\t\tverb:   \"remove\"\n\t\t};\n\n\t\takeeba.Dbfilters.toggle(new_data, this, function (response, caller)\n\t\t{\n\t\t\tif (response.success)\n\t\t\t{\n\t\t\t\tvar elRemove = caller.parentNode.parentNode;\n\t\t\t\telRemove.parentNode.removeChild(elRemove);\n\t\t\t}\n\t\t});\n\t});\n\n\tvar elDeleteIcon       = document.createElement(\"span\");\n\telDeleteIcon.className = \"ak-toggle-button akion-ios-trash deletebutton\";\n\telDeleteContainer.appendChild(elDeleteIcon);\n\n\telEditContainer.className = \"ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--teal\";\n\takeeba.System.addEventListener(elEditContainer, \"click\", function ()\n\t{\n\t\t// If I'm editing there's an input box appended to the parent element of this edit button\n\t\tvar inputBox = this.parentNode.querySelector(\"input\");\n\n\t\t// So, if I'm already editing quit; we mustn't show multiple edit boxes!\n\t\tif (inputBox != null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Hide the text label\n\t\tthis.parentNode.querySelector(\"span.ak_filter_name\").style.display = \"none\";\n\n\t\tvar elInput = document.createElement(\"input\");\n\t\telInput.setAttribute(\"type\", \"text\");\n\t\telInput.setAttribute(\"size\", 60);\n\t\telInput.value = this.parentNode.querySelector(\"span.ak_filter_name\").textContent;\n\t\tthis.parentNode.appendChild(elInput);\n\n\t\takeeba.System.addEventListener(elInput, \"blur\", function ()\n\t\t{\n\t\t\tvar new_value = this.value;\n\t\t\tvar that      = this;\n\n\t\t\tif (new_value == \"\")\n\t\t\t{\n\t\t\t\t// Well, if the user meant to remove the filter, let's help him!\n\t\t\t\takeeba.System.triggerEvent(that.parentNode.querySelector(\"span.deletebutton\"), \"click\");\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// First, remove the old filter\n\t\t\tvar elRoot   = document.getElementById(\"active_root\");\n\t\t\tvar new_data = {\n\t\t\t\troot:     elRoot.options[elRoot.selectedIndex].value,\n\t\t\t\told_node: def.node,\n\t\t\t\tnew_node: new_value,\n\t\t\t\tfilter:   def.type,\n\t\t\t\tverb:     \"swap\"\n\t\t\t};\n\n\t\t\tvar elEditContainer = that.parentNode.querySelector(\"span.editcontainer\");\n\n\t\t\takeeba.Dbfilters.toggle(\n\t\t\t\tnew_data,\n\t\t\t\telEditContainer,\n\t\t\t\tfunction (response, caller)\n\t\t\t\t{\n\t\t\t\t\t// Remove the editor\n\t\t\t\t\tvar elFilterName           = that.parentNode.querySelector(\"span.ak_filter_name\");\n\t\t\t\t\telFilterName.style.display = \"inline-block\";\n\t\t\t\t\telFilterName.textContent   = new_value;\n\n\t\t\t\t\tthat.parentNode.removeChild(that);\n\t\t\t\t\tdef.node = new_value;\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\telInput.focus();\n\t});\n\n\telEditIcon           = document.createElement(\"span\");\n\telEditIcon.className = \"ak-toggle-button akion-edit editbutton\";\n\telEditContainer.appendChild(elEditIcon);\n\n\telFilterName.className   = \"ak_filter_name\";\n\telFilterName.textContent = def.node;\n\n\telFilterItem.appendChild(elDeleteContainer);\n\telFilterItem.appendChild(elEditContainer);\n\telFilterItem.appendChild(elFilterName);\n\n\telRow.appendChild(elFilterType);\n\telRow.appendChild(elFilterItem);\n\n\tappend_to_here.appendChild(elRow);\n};\n\nakeeba.Dbfilters.addNew = function (filtertype)\n{\n\t// Add a row below ourselves\n\tvar new_def = {\n\t\ttype: filtertype,\n\t\tnode: \"\"\n\t};\n\takeeba.Dbfilters.addRow(new_def, document.getElementById(\"ak_list_table\").children[1]);\n\n\tvar trList = document.getElementById(\"ak_list_table\").children[1].children;\n\tvar lastTr = trList[trList.length - 1];\n\takeeba.System.triggerEvent(lastTr.querySelector(\"span.editbutton\"), \"click\");\n};\n\n/**\n * Renders the tabular view of the Database Filter\n * @param data\n * @return\n */\nakeeba.Dbfilters.renderTab = function (data)\n{\n\tvar tbody       = document.getElementById(\"ak_list_contents\");\n\ttbody.innerHTML = \"\";\n\n\tfor (var counter = 0; counter < data.length; counter++)\n\t{\n\t\tvar def = data[counter];\n\n\t\takeeba.Dbfilters.addRow(def, tbody);\n\t}\n};\n\n/**\n * Activates the exclusion filters for non-CMS tables\n */\nakeeba.Dbfilters.excludeNonCMS = function ()\n{\n\tvar tables = document.getElementById(\"tables\").children;\n\n\tfor (counter = 0; counter < tables.length; counter++)\n\t{\n\t\tvar element = tables[counter];\n\n\t\t// Get the table name\n\t\tvar tablename = element.querySelector(\"span.table-name\").textContent;\n\t\tvar prefix    = tablename.substr(0, 3);\n\n\t\t// If the prefix is not #__ it's a core table and I have to exclude it\n\t\tif (prefix != \"#__\")\n\t\t{\n\t\t\tvar iconContainer = element.querySelector(\"span.table-icon-container\");\n\t\t\tvar icon          = iconContainer.querySelector(\"span.ak-toggle-button\");\n\n\t\t\tif (iconContainer.className.indexOf(\"akeeba-btn--orange\") == -1)\n\t\t\t{\n\t\t\t\takeeba.System.triggerEvent(icon, \"click\");\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Wipes out the database filters\n * @return\n */\nakeeba.Dbfilters.nuke = function ()\n{\n\tvar data     = {\n\t\troot: akeeba.Dbfilters.currentRoot,\n\t\tverb: \"reset\"\n\t};\n\tvar new_data = {\n\t\takaction: JSON.stringify(data)\n\t};\n\takeeba.System.doAjax(new_data, function (response)\n\t{\n\t\takeeba.Dbfilters.render(response);\n\t}, null, false, 15000);\n};\n\nakeeba.System.documentReady(function ()\n{\n\tvar guiData                  = akeeba.System.getOptions(\"akeeba.DatabaseFilters.guiData\", null);\n\tvar viewType                 = akeeba.System.getOptions(\"akeeba.DatabaseFilters.viewType\", null);\n\n\t// Take into account the different view types\n\tif (viewType === \"list\")\n\t{\n\t\t// List view\n\t\takeeba.System.addEventListener(\"active_root\", \"change\", akeeba.Dbfilters.activeRootChanged);\n\t\takeeba.Dbfilters.render(guiData);\n\t}\n\telse\n\t{\n\t\t// Tabular view\n\t\takeeba.System.addEventListener(\"active_root\", \"change\", akeeba.Dbfilters.activeTabRootChanged);\n\t\takeeba.Dbfilters.renderTab(guiData);\n\t}\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersExcludeNonCMS\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.excludeNonCMS();\n\n\t\treturn false;\n\t});\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersNuke\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.nuke();\n\n\t\treturn false;\n\t});\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersAddNewTables\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.addNew(\"tables\");\n\n\t\treturn false;\n\t});\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersAddNewTableData\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.addNew(\"tabledata\");\n\n\t\treturn false;\n\t});\n});"],"mappings":"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"}